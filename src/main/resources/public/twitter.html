<!DOCTYPE html>
<html>
<head>
  <title>Fritz Up?</title>
  <link rel="stylesheet" type="text/css" href="/styles.css">
</head>
<body>
  <header class="header">
    <!-- <div class="container">
      <ul class="navigation">
        <li><a href="#" class="active">Home</a></li>
        <li><a href="#">Sizzling</a></li>
        <li><a href="#">About</a></li>
      </ul>
    </div> -->
  </header>

<div><h1> Fritter <h1> </div>

<div class="userInMaster">
  <div class="userIn">
  <h3> New User? </h3>
  <form action="/newUser" method="post">
      <input type="text" id="userName" name="UserName" placeholder="Enter Username Here">
      <br>
      <input type="password" id="password" name="Password" placeholder="Enter Password Here">
      <br>
      <input type="email" name="email" value="Enter email here">
      <br>
      <input type="submit" id="createNew" value="Create New Account"/ >
      <br>
  </form>
  <br>
</div>
<div class="userIn">
<h3> Returning User? </h3>
<div>
<!-- <form action="/returnUser" method="post"> -->
  <input type="text" name="returnUserName" id="returnUserName" placeholder="Enter Username Here">
   <br>
   <input type="password" name="returnUserPassword" id="returnUserPassword" placeholder="Enter Password Here">
    <br>
      <input type="submit" id="returnUser" value="Log In"/ >
</div>
<br>
</div>
</div>

<div class="newTweet">
  <input type="text" name="newTweet" placeholder="Tweet here!" id="newTweetContent">
  <br>
  <input type="submit" id="newTweetSubmit" value="Go"/ >
</div>
<br>

{% for a in timeline %}
<div class ="Sizzling">
    <ul>
        <li>{{a.username}}</li>
        <li>{{a.content}}</li>
        <li>{{a.tweetDt}}</li>
    </ul>
</div>
{% endfor %}


<script>
// script for adding new users
// AJAX posting x-www-form-urlencoded
var button = document.getElementById('createNew');
button.onclick = function () {
    var xhr = new XMLHttpRequest();
    xhr.open('POST', '/newUser');
    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    xhr.onload = function() {
        if (xhr.status === 200) {
            var result = document.getElementById('result');
            result.innerHTML = xhr.responseText;
        } else if (xhr.status !== 200) {
            alert('Request failed.  Returned status of ' + xhr.status);
        }
    };
    // var first = document.getElementById('a').value;
    // var second = document.getElementById('b').value;
    // var body = 'first=' + encodeURIComponent(first) + '&second=' + encodeURIComponent(second);
    //  console.log(body);
    // xhr.send(body);
};

// // AJAX posting json
// var cat_button = document.getElementById('cat_button');
// cat_button.onclick = function () {
//     var xhr = new XMLHttpRequest();
//     xhr.open('POST', '/jsonpost');
//     xhr.setRequestHeader('Content-Type', 'application/json');
//     xhr.onload = function() {
//         if (xhr.status === 200) {
//             console.log(xhr.responseText);
//         } else if (xhr.status !== 200) {
//             alert('Request failed.  Returned status of ' + xhr.status);
//         }
//     };
//     var cat = {tail: 'brown', age: 4};
//     xhr.send(JSON.stringify(cat));
// };

// script for logging in existing users
// AJAX posting x-www-form-urlencoded
var returnButton = document.getElementById('returnUser');
returnButton.onclick = function () {
    var xhrReturn = new XMLHttpRequest();
    xhrReturn.open('POST', '/returnUser');
    xhrReturn.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    xhrReturn.onload = function() {
        if (xhrReturn.status === 200) {
            var rresult = document.getElementById('result');
            rresult.innerHTML = xhrReturn.responseText;
        } else if (xhrReturn.status !== 200) {
            alert('Request failed.  Returned status of ' + xhrReturn.status);
        }
    };
    var first = document.getElementById('returnUserName').value;
    var second = document.getElementById('returnUserPassword').value;
    var returnBody = 'returnUserName=' + encodeURIComponent(first) + '&returnUserName=' + encodeURIComponent(second);
    console.log(returnBody);
    xhrReturn.send(returnBody);
};

// submit new tweet
var newTweetButton = document.getElementById('newTweetSubmit');
newTweetButton.onclick = function () {
    var xhrNewTweet = new XMLHttpRequest();
    xhrNewTweet.open('POST', '/');
    xhrNewTweet.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    xhrNewTweet.onload = function() {
        if (xhrNewTweet.status === 200) {
            var nTresult = document.getElementById('result');
            ntresult.innerHTML = xhrNewTweet.responseText;
        } else if (xhrNewTweet.status !== 200) {
            alert('Request failed.  Returned status of ' + xhrNewTweet.status);
        }
    };
    var newTweet = document.getElementById('newTweetContent').value;
    var returnBody = 'newTweetContent=' + encodeURIComponent(newTweet) + '&returnUserName=david';
    console.log(returnBody);
    xhrNewTweet.send(returnBody);
};
</script>

<!-- <script>
      console.log("I am here");
var xhr = new XMLHttpRequest();
xhr.open('GET', '/data');
xhr.onload = function(evt) {
      console.log("I am inside");
   if (xhr.status === 200) {
        var response = JSON.parse(xhr.responseText);
        for (var i=0;i < response.length;i++){
          console.log(response[i].artist);
          var x = document.createElement("div");
          x.innerHTML="Artist: " +   response[i].artist + " Title: " + response[i].title;
          document.body.appendChild(x);
        }
        console.log(response);
    } else {
        alert('Request failed.  Returned status of ' + xhr.status);
    }
};
xhr.send();
</script> -->

</body>
</html>
