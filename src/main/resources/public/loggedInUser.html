<!DOCTYPE html>
<html>
<head>
  <title>Fritz Up?</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <link rel="stylesheet" type="text/css" href="/styles.css">
</head>
<body>
  <header class="header">
    <div class="container">
      <ul class="navigation">
        <li><a href="#" class="active">LogOff</a></li>
        <li><a href="#">About</a></li>
        <li><a href="#">User</a></li>
        <li>
          <form action="/logOff" method="post">
          <button type="submit">logOff</button>
        </form>
        </li>
      </ul>
    </div>
</header>

<div><h1> Fritter <h1> </div>

<div class="userInMaster">
</div>
<br>
<input type="text" id="usrContent" name="usrContent" placeholder="What's happening?">
<input type="submit" id="tweet" value="submit tweet"/ >
<br>
</div>
</div>

<div class=outer>
<div class=timeline>
<br>
<br>
{% for a in timeline %}
<div class ="userTimeline">
    <ul>
        <li>{{a.username}}</li>
        <li>{{a.content}}</li>
        <li>{{a.tweetDt}}</li>
        <input type="retweet" id="retweet" value="retweet"/ >
    </ul>
</div>
{% endfor %}
</div>
</div>

<script>
// script for submitting new tweet
// AJAX posting x-www-form-urlencoded
var returnButton = document.getElementById('createNew');
returnButton.onclick = function () {
    var xhrReturn = new XMLHttpRequest();
    xhrReturn.open('POST', '/newUser');
    xhrReturn.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    xhrReturn.onload = function() {
        if (xhrReturn.status === 200) {
            var result = document.getElementById('new_msg');
            result.innerHTML = xhrReturn.responseText;
        } else if (xhrReturn.status !== 200) {
            alert('Request failed.  Returned status of ' + xhrReturn.status);
        }
    };
    var first = document.getElementById('userName').value;
    var second = document.getElementById('password').value;
    var third = document.getElementById('email').value;
    var returnBody = 'userName=' + encodeURIComponent(first) + '&password=' + encodeURIComponent(second) + '&email=' + encodeURIComponent(third);
    console.log(returnBody);
    xhrReturn.send(returnBody);
};
// script for logging in existing users
// AJAX posting x-www-form-urlencoded
var returnButton = document.getElementById('returnUser');
returnButton.onclick = function () {
    var xhrReturn = new XMLHttpRequest();
    xhrReturn.open('POST', '/returnUser');
    xhrReturn.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    xhrReturn.onload = function() {
        if (xhrReturn.status === 200) {
            var result = document.getElementById('ret_msg');
            result.innerHTML = xhrReturn.responseText;
        } else if (xhrReturn.status !== 200) {
            alert('Request failed.  Returned status of ' + xhrReturn.status);
        }
    };
    var first = document.getElementById('returnUserName').value;
    var second = document.getElementById('returnUserPassword').value;
    var returnBody = 'returnUserName=' + encodeURIComponent(first) + '&returnUserPassword=' + encodeURIComponent(second);
    console.log(returnBody);
    xhrReturn.send(returnBody);
};
</script>
</body>
</html>
