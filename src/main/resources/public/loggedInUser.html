<!DOCTYPE html>
<html>
<head>
  <title>Fritz Up?</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <!-- <link rel="stylesheet" type="text/css" href="/styles.css"> -->
</head>
<body>
  <header class="header">
    <div class="container">
      <ul class="navigation">
        <li><a href="#" class="active">LogOff</a></li>
        <li><a href="#">About</a></li>
        <li><a href="#">User</a></li>
        <li>
          <form action="/logOff" method="post">
          <button type="submit">logOff</button>
        </form>
        </li>
      </ul>
    </div>
</header>

<div><h1> Fritter <h1> </div>

<div class="newTweet">
<br>
<input type="text" id="newTweetContent" name="newTweet" placeholder="What's happening?">
<br>
<input type="submit" id="newTweetSubmit" value="Go"/ >
<br>
</div>

<div class=outer>
<div class=timeline>
<br>
<br>
{% for a in timeline %}
<div class ="userTimeline">
    <ul>
        <li>{{a.username}}</li>
        <li>{{a.content}}</li>
        <li>{{a.tweetDt}}</li>
        <input type="retweet" id="retweet" value="retweet"/ >
    </ul>
</div>
{% endfor %}
</div>
</div>

<script>

// submit new tweet
var newTweetButton = document.getElementById('newTweetSubmit');
newTweetButton.onclick = function () {
    var xhrNewTweet = new XMLHttpRequest();
    xhrNewTweet.open('POST', '/newTweet'); //change route to /newTweet
    xhrNewTweet.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    xhrNewTweet.onload = function() {
        if (xhrNewTweet.status === 200) {
            var ntresult = document.getElementById('newTweetSubmit');
            ntresult.innerHTML = xhrNewTweet.responseText;
        } else if (xhrNewTweet.status !== 200) {
            alert('Request failed.  Returned status of ' + xhrNewTweet.status);
        }
    };
    var newTweet = document.getElementById('newTweetContent').value;
    var returnBody = 'newTweetContent=' + encodeURIComponent(newTweet) + '&returnUserName=david';
    console.log(returnBody);
    xhrNewTweet.send(returnBody);
};
</script>
</body>
</html>
